{% extends 'base.html' %}

{% block head %}
    <title>Mind Masters</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <script src="{{ url_for('static', filename='js/online.js') }}"></script>
    
{% endblock %}

{% block body %}

    <!-- This is the homepage of this project. It contains a game board, and two buttons that allow users to start a new game against another user or a computer -->

    <div class="container-fluid">

        <!-- Game board. It will disappear when width is reduced to a certain amount. -->

        
        <div class="leftpane">
            <div class="grid-container">
                {% set ballRow = namespace(value=1) %}
                {% for x in range(1, 18) %}
                    {% for y in range(1, 6) %}
    
                        {% if y == 2 and (x == 2 or x == 4 or x == 6 or x == 8 or x == 10 or x == 12 or x == 14 or x == 16) %}
                            <!-- Container for balls -->
                            <div class="grid-item balls-container" id="rig-{{ ballRow.value }}">
                                
                                {% for z in range(1, 4) %}
                                    {% set ballCol = namespace(value=1) %}
                                    {% for v in range(1, 10) %}
                                        {% if z == 2 and (v == 2 or v == 4 or v == 6 or v == 8)  %}
                                            <div class="ball" id="ball-{{ ballRow.value }}-{{ ballCol.value }}"></div>
                                            {% set ballCol.value = ballCol.value + 1 %}
                                            {% if v == 8 %}
                                                {% set ballRow.value = ballRow.value + 1 %}
                                            {% endif %}
                                        {% else %}
                                            <div class="ball-padding"></div>
                                        {% endif %}
                                    {% endfor %}
                                {% endfor %}
                            </div>
                        {% elif y == 4 and (x == 2 or x == 4 or x == 6 or x == 8 or x == 10 or x == 12 or x == 14 or x == 16) %}
                            <!-- Container for suggestion -->
                            <div class="grid-item suggestion-container">
                                {% set suggCol = namespace(value=1) %}
                                {% for z in range(1, 6) %}
                                    {% for v in range(1, 6) %}
                                        {% if (z == 2 or z == 4) and (v == 2 or v == 4)  %}
                                            <div class="suggestion" id="suggestion-{{ ballRow.value-1 }}-{{ suggCol.value }}"></div>
                                            {% set suggCol.value = suggCol.value + 1 %}
                                        {% else %}
                                            <div class="suggestion-padding"></div>
                                        {% endif %}
                                    {% endfor %}
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="grid-item"></div>
                        {% endif %}
                        
                    {% endfor %}
                {% endfor %}
                
                </div>
        </div>

        <!-- This part will persist even when the left pane disappears. Contains a catch-phrase and two buttons to play. -->

        <div class="rightpane">
            <div class="right-toppane">
                {% if session['username'] %}
                    <h2>ciao {{ session['username'] }}</h2>
                {% else %}
                    <a href="{{ url_for('login') }}">
                        <h3>Accedi per giocare online</h3>
                    </a>
                {% endif %}
            </div> 
            <div class="right-middlepane" >
                {% if session['username'] %}
                    <a class="clickable"data-bs-toggle="modal" data-bs-target="#md_online">
                        <h3>Play Online.</h3>
                    </a>
                {% endif %}
            </div> 
            <div class="right-bottompane">
                <!--Sistemare si vede il link blu-->
                <a href="{{ url_for('game') }}" >
                    <h3>Play Computer.</h3> 
                </a> 
               
            </div> 
        </div>
    </div>
    <!--modal per avviare la partita online permettendo di creare o entrare in una stanza-->
    <div id="md_online" class="modal fade " data-bs-backdrop='static'>
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background-color: #4d4d4d;">
                <div class="modal-header">
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-header">
                    <h2 class="modal-title " id="md_body">Gioca online con i tuoi amici</h2>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-info" id="left_bn" data-bs-dismiss="modal" style="margin: 0 auto;" onclick="window.location.href = `{{ url_for('lobby') }}`">Crea una stanza</button>
                    <button class="btn btn-info"  id="right-bn" style="margin: 0 auto;" onclick="iserisciCodice()">Entra in una stanza</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


